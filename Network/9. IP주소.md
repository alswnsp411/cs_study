# IP 주소는 무엇이며, 어떤 기능을 하고 있나요?

### IP(Internet Protocol) 주소란 ?  
인터넷에 연결되어 있는 모든 장치들(컴퓨터, 서버 장비, 스마트폰 등)을 식별할 수 있도록 각각의 장비에 부여되는 **고유** 주소이다.  
IP의 역할은 OSI의 Layer 3(Network Layer)에 위치하는 프로토콜로, 패킷이라는 통신 단위를 이용해서 지정한 IP 주소에 데이터를 전달하는 것에 목적을 둔다. IP 주소는 데이터의 출발지와 목적지 주소를 지정할 때 사용된다.  

<br />

### IPv4와 IPv6의 차이에 대해 설명해 주세요.
**IPv4란 ?**
IP version 4의 약자로 전 세계적으로 사용된 첫번째 인터넷 프로토콜이다.  
![ip주소](https://github.com/kksshh0612/cs_study/assets/74577811/e72e7d75-511e-405a-a603-1339387b525e)  
IP는 172.16.254.1과 같이 0부터 255까지의 숫자 4개를 점으로 구분하여 표시한다. 이를 2진법으로 표현하면, 32bit 주소 체계가 되어 10101100.00010000.1111110.0000001이 된다. 따라서 IPv4는 2^32=43억개가 조금 안되는 주소를 나타낼 수 있다.

<br />

**IPv6란 ?**  
IP version 6의 약자로, 전 세계적으로 인터넷 사용자 수가 급증하면서 생겨난 IPv4 주소 고갈 문제를 해결하기 위해 등장한 주소이다.  
![ipv6주소](https://github.com/kksshh0612/cs_study/assets/74577811/55ca6df2-d42b-4996-8026-55d64a67b2f9)   
IPv4의 주소 체계를 128 비트 크기로 확장했다. 16비트씩 8자리로 각 자리는 콜론으로 구분한다.  
따라서 IPv6의 128비트 주소공간은 2^128 개의 주소를 갖고 있어 거의 무한대로 쓸 수 있다.  

<br />
IPv6는 IPv4보다 네트워크 속도, 보안적인 부분 등 여러 면에서 뛰어나지만, 기존의 주소 체계를 변경하는데 비용이 많이 들어서 완전히 상용화 되지 않았다.

<br />

### IPv6는 IPv4의 주소 고갈 문제를 해결하기 위해 만들어졌지만, 아직도 수많은 기기가 IPv4를 사용하고 있습니다. 고갈 문제를 어떻게 해결할 수 있을까요?
IPv4 주소 고갈 문제를 해결하기 위한 방법으로 NAT(Network Address Translation), DHCP, IPv6와의 호환성을 유지하기의 방법이 있다.

- NAT(Network Address Translation)
: 공인 IP 주소를 사설 IP 주소로 바꿔주는데 사용하는 통신망의 주소 변환기  

> 공인 IP 주소
>

> 사설 IP 주소
>

인터넷의 공인 IP 주소는 한정되어 있기 때문에 이를 공유할 수 있도록 하는 것이 필요하다.  
NAT를 이용하면 사설 IP주소를 사용하면서 이를 공인 IP주소와 상호 변환할 수 있도록 하여 공인 IP주소를 다수가 함께 사용할 수 있도록 할 수 있다.
![NAT](https://github.com/kksshh0612/cs_study/assets/74577811/ec7c296d-f584-478e-b974-0ecf848d8cb3)   
인터넷은 공인 IP로만 연결되어 통신이 가능하다.
공인 인터넷망과 내 컴퓨터 사이에는 내 컴퓨터에게 IP를 할당해주는 공유기가 있다. 그리고 공유기는 공인 IP를 보유하며 인터넷에 맞닿아 있다. 
사설 IP를 가지고 있는 내 컴퓨터가 외부 서비스를 사용하고자 공유기로 나아가면 공유기는 내 컴퓨터의 사설 IP를 공유기 자신의 공인 IP로 변환한다. 즉 내 컴퓨터는 공유기를 지나 외부 인터넷으로 나아갈때 공유기의 공인 IP를 가지고 목적지 주소로 향한다. 


> NAT는 인터넷이라는 공공망과 연결되는 사용자들의 고유한 사설망을 침입자들로부터 보호할 수 있다.
> 공개된 인터넷과 사설망 사이에 방화벽을 설치하여 외부 공격으로부터 사용자의 통신망을 보호하는 수단으로 활용할 수 있다.
> 이때 외부 통신망(인터넷망)과 연결하는 장비인 라우터에 NAT를 설정할 경우 라우터는 자신에게 할당된 공인 IP 주소만 외부로 알려지게 하고, 내부에서는 사설 IP 주소만 사용하도록 하여 필요시에 이를 서로 변환시켜준다.
> 따라서 외부 침입자가 공격하기 위해서는 사설망의 내부 사설 IP 주소를 알아야 하기 때문에 공격이 불가능해지므로 내부 네트워크를 보호할 수 있다.

<br/>

- DHCP(Dynamic Host Configuration Protocol)  
동적으로 호스트를 설정하는 규약이다. 네트워크 안의 컴퓨터에 자동으로 네임 서버 주소, IP 주소, 게이트웨이 주소를 할당해준다. 해당 클라이언트에게 일정 기간 임대를 하는 동적 주소 할당 프로토콜이다. 
PC의 수가 많거나 PC 자체 변동사항이 많은 경우 IP 설정이 장치가 연결된 라우터에서 현재 사용하지 않는 주소로 자동으로 부여되기 때문에 효율적으로 사용 가능하고, IP를 자동으로 할당해주기 때문에 IP 충돌을 막을 수 있다.
접속이 끊긴 IP를 다른 장치에서 재사용할 수 있어 상당히 유용한 방법이다. 하지만 DHCP 서버에 의존하기 때문에 서버가 다운되면 IP 할당이 제대로 이루어지지 않는다.

![dhcp](https://github.com/kksshh0612/cs_study/assets/74577811/db477d83-3e24-47dc-839c-ed3ee447bc0d)  
1. 공유기에 노트북을 LAN으로 연결하면 자동으로 DHCP Client의 MAC 주소(8c:85...)가 DHCP Server에게 IP 주소를 요청한다.
2. DHCP Server는 DHCP Client에게 사용 가능한 IP를 자동으로 할당한다.
3. 단, DHCP를 통해 할당 받은 IP 주소는 영구적인 것이 아니다.
4. 할당 받은 IP 주소를 사용하다가 임대 시간이 지나면 기간을 연장하거나 IP 주소를 반납한다.

<br/>

-IPv4와 IPv6의 호환성 유지하기
IPv4/IPv6 전환 기술로는 듀얼 스택(dual stack)기술, 터널링(tunneling)기술, 헤더 변환(header translation) 기술의 3가지 범주가 있다.

<br />


### IPv4를 사용하는 장비와 IPv6를 사용하는 같은 네트워크 내에서 통신이 가능한가요? 가능하다면 어떤 방법을 사용하나요?  
IPv6가 출시되고 기존에 사용하던 IPv4를 IPv6로 한번에 변환하는 것이 불가능하기 때문에 IPv4 망에서 IPv6 망으로 자연스럽게 진화시키기 위한 전환 기술을 만들었다.
IPv4/IPv6 전환 기술을 크게 나누면 듀얼 스택(dual stack) 기술, 터널링(tunneling)기술, 헤더 변환(header translation) 기술의 3가지 범주로 분류할 수 있다.

- 듀얼 스택 (dual stack)  
: 하나의 시스템(호스트 또는 라우터)에서 IPv4와 IPv6를 동시에 처리하는 기술이다. 운영체제의 커널단에서 소프트웨어 형태로 구현하여 시스템은 물리적으로 하나지만 논리적으로는 IPv4, IPv6 둘 다 지원한다.
![dual stack example](https://github.com/kksshh0612/cs_study/assets/74577811/5dc7714d-e0bf-4b9f-814d-b4c9b1a03426)
1. 듀얼스택 장치인 Host A가 로컬 DNS server에 www.example.com의 사용가능한 모든 IP 주소를 요청한다.
2. DNS server는 요청을 받고 ipv4, ipv6 주소 유형을 응답해준다.
3. Host A는 기본적으로 ipv6 주소를 선택하여 ipv6 세션이 생성된다.
4. ipv6가 example.com의 서버와 작동하지 않으면 ipv4를 사용하여 연결 설정을 다시 시도하므로 클라이언트에서 약간의 지연이 발생한다.

이를 해결하기 위해 👀 Happy Eyeballs라는 네트워크 프로토콜 기술을 통해 ipv6이 지원되지 않는 환경에서도 빠른 웹브라우징을 유지할 수 있도록 한다.

- 터널링 (tunneling)
: 터널링의 종류로는 manual tunneling, 6to4, ISATAP 등 다양하다.
 6 to 4 터널링
 컴퓨터 A와 B는 서로 다른 두 개의 ipv6 네트워크에 있고, IPv4 네트워크로만 통신할 수 있다. 지점 간 연결을 위해 스택 경계 라우터를 수행해야 한다. 연결은 수동 터널링으로 설정할 수 있다.
1. 컴퓨터 A가 컴퓨터 B에 ipv6 패킷을 보낸다.
2. 두 라우터 사이에 터널이 생성된다.
3. ipv6 패킷은 왼쪽 끝에 있는 두 대의 컴퓨터에서 전달되고 하나가 썩으면 터널을 통해 라우터로 패킷을 보냅니다.
4. 패킷은 라우터에서 오른쪽 끝의 컴퓨터 B로 전달된다.
   

> 스택 경계 라우터 (Stack Border Router)
> : 네트워크의 서로 다른 스택들 간에 통신을 중개하는 라우터로, 주로 다양한 네트워크 스택 간의 통신이 필요한 복잡한 네트워크 환경에서 사용된다.


### IP가 송신자와 수신자를 정확하게 전송되는 것을 보장해 주나요?

<br />

### IPv4에서 수행하는 Checksum과 TCP에서 수행하는 Checksum은 어떤 차이가 있나요?

<br />

### TTL(Hop Limit)이란 무엇인가요?

<br />

### IP 주소와 MAC 주소의 차이에 대해 설명해 주세요.

<br />

---

<br />
ref: 

ipv4 : https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-IP-%EA%B8%B0%EC%B4%88-%EC%82%AC%EC%84%A4IP-%EA%B3%B5%EC%9D%B8IP-NAT-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A7%90-%EC%89%BD%EA%B2%8C-%EC%A0%95%EB%A6%AC  

ip란 무엇인가 : https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-00000-%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80?category=943705  

인터넷 네트워크 통신 기초 : https://inpa.tistory.com/entry/%EC%9B%B9-%ED%86%B5%EC%8B%A0-%EA%B8%B0%EB%B3%B8-%EC%9D%B4%EB%A1%A0-%ED%86%B5%ED%95%A9-%EC%9A%94%EC%95%BD-%EC%A0%95%EB%A6%AC  

dual stack: https://www.youtube.com/watch?v=oySOjEiODiM

