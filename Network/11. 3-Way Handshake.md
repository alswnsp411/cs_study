# π«±π»β€π«²πΌ3-way Handshake

π’΅**ν• λ§λ”” μ •λ¦¬**
_**λ°μ΄ν„° μ†΅μμ‹ μ„ μ„ν•΄ ν•„μ”ν• μ—°κ²° ν™•λ¦½, ν•΄μ  κ³Όμ •**_

## TCP ν”λκ·Έ

TCP ν†µμ‹ μ— μμ–΄ ν†µμ‹ μ„ μ„ν•΄μ„λ” κ°€μƒμ ν†µμ‹ λ΅(μ—°κ²°)λ¥Ό ν™•λ³΄ν•΄μ•Ό ν•λ©°, μ΄ ν™•λ³΄ κ³Όμ •μ—μ„ TCP ν”λκ·Έμ μ½”λ“ λΉ„νΈ(6bit)κ°€ ν™μ©λ¨

- μ‚¬μ©λλ” TCP ν”λκ·Έ
  ![TCP header](https://itwiki.kr/images/c/cf/TCP_%EC%84%B8%EA%B7%B8%EB%A8%BC%ED%8A%B8_%ED%97%A4%EB%8D%94.jpg)
  - SYN(Synchronize sequence number)
    β€λ™κΈ°ν™”ν•λ‹¤β€™ β‡’ μ„λ΅μ μƒνƒλ¥Ό μ§€μ†μ μΌλ΅ λ™κΈ°ν™”
  - ACK(Acknowledgement)
    β€λ°›μ•μμ„ μ•λ¦¬λ‹¤β€™ β‡’ μƒλ€λ°©μ μ”μ²­μ„ μΈμ§€ν•¨μ„ μ•λ¦Ό

π”— **λ„μ›€μ΄ λ  λ§ν• μμƒ**
[[λ”°λΌε­Έ IT] 09. μ—°κ²°μ§€ν–¥ν• TCP ν”„λ΅ν† μ½ - TCP 3Way Handshake](https://www.youtube.com/watch?v=Ah4-MWISel8&t=236s)

![3-way-handshake](https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/Tcp-handshake.svg/1200px-Tcp-handshake.svg.png)

λ°μ΄ν„° μ†΅μμ‹  μ „ μ„Έμ… μ—°κ²°μ„ ν™•λ¦½ν•λ” κ³Όμ •μΌλ΅, ν¨ν‚· κµν™μ΄ μ΄ μ„Έ λ² μ΄λ£¨μ–΄μ§ (ν΄λΌμ΄μ–ΈνΈμ μ”μ²­ - μ„λ²„μ μ‘λ‹µ λ° μ”μ²­ - ν΄λΌμ΄μ–ΈνΈμ ν™•μΈ μ‘λ‹µ)

## κ³Όμ •

1. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— SYN ν”λκ·Έκ°€ μ„Έν…λ ν¨ν‚·μ΄ λ³΄λ‚΄μ§

   1. TCPμ SEQλ²νΈμ— λ‚μλ¥Ό λ¶€μ—¬ / ACKλ²νΈλ” 0μΌλ΅ μ„Έν…

      > **λ‚μ μƒμ„± μ΄μ **
      >
      > ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ κ°„ tcp μ—°κ²°μ΄ μ΄μ „μ—λ„ μ΄λ£¨μ–΄μ΅λ‹¤λ©΄, μμ°¨μ  μμ„ λ¶€μ—¬μ‹ λ‹¤λ¥Έ tcp μ—°κ²°λ΅λ¶€ν„° μ¤λ” ν¨ν‚·μΌλ΅ μΈμ‹ν•  κ°€λ¥μ„±μ΄ μ΅΄μ¬ν•λ―€λ΅ λ‚μλ¥Ό μƒμ„±ν•μ—¬ μ΄λ¬ν• κ°€λ¥μ„±μ„ μ¤„μ„

2. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ λ°›κ³  μ”μ²­μ„ μλ½ν•λ‹¤λ” ACK ν”λκ·Έμ™€ SYN ν”λκ·Έκ°€ κ°™μ΄ μ„Έν…λ ν¨ν‚·μ„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λƒ„
   1. TCPμ SEQλ²νΈμ— λ‚μλ¥Ό λ¶€μ—¬
   2. ACKλ²νΈμ—λ” ν΄λΌμ΄μ–ΈνΈλ΅ λ°›μ€ SEQλ²νΈ + 1
3. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ μλ½ μ‘λ‹µμΈ ν¨ν‚·μ„ λ°›κ³ , ACK ν”λκ·Έκ°€ μ„Έν…λ ν¨ν‚·μ„ μ„λ²„λ΅ λ³΄λƒ„ β‡’ μ—°κ²° μ„±λ¦½
   1. SEQλ²νΈλ” μ„λ²„λ΅λ¶€ν„° λ°›μ€ ACKλ²νΈ β‡’ λ™κΈ°ν™” μ™„λ£
   2. ACK λ²νΈμ—λ” μ„λ²„λ΅λ¶€ν„° λ°›μ€ SEQλ²νΈ + 1

### π§ **λ” μ•μ•„λ³΄κΈ°**

> **2-Way Handshake**
>
> TCPλ” μ—°κ²°μ§€ν–¥ν• ν”„λ΅ν† μ½λ΅ μ–‘λ°©ν–¥μ„± μ—°κ²°μ„ μ§€ν–¥ν•λ―€λ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” μ„λ΅μ μ΅΄μ¬λ¥Ό μ„λ΅μ—κ² μ•λ¦¬κ³  ν™•μΈλ°›λ”κ³Όμ •μ΄ ν•„μ”ν•¨
>
> β‡’ 2-Wayλ΅λ” λ¶€μ΅±ν•¨

> **SYN Flooding**
>
> 1. ν•΄μ»¤κ°€ κ°€μƒμ ν΄λΌμ΄μ–ΈνΈλ΅ μ„μ¥ν•΄ ν‘μ  μ„λ²„λ΅ λ€λ‰μ SYN ν¨ν‚·μ„ μ „μ†΅
> 2. κ³µκ²© λ€μƒμ§€μΈ μ„λ²„λ” κ° μ—°κ²° μ”μ²­μ— μ‘λ‹µν•λ©°, μ‘λ‹µ μμ‹  μ¤€λΉ„κ°€ μ™„λ£λ ν¬νΈλ¥Ό λ‚¨κ²¨λ‘
> 3. λ„μ°©ν•μ§€ μ•λ” λ§μ§€λ§‰ ACK ν¨ν‚·μ„ μ„λ²„κ°€ κΈ°λ‹¤λ¦¬λ” λ™μ• ν•΄μ»¤λ” κ³„μ†ν•΄μ„ λ” λ§μ€ SYN ν¨ν‚·μ„ μ „μ†΅
> 4. μ‚¬μ© κ°€λ¥ν• λ¨λ“  ν¬νΈλ¥Ό μ‚¬μ©ν•κ³  λ‚λ©΄ ν•΄λ‹Ή μ„λ²„λ” μ •μƒμ  κΈ°λ¥ μν–‰ λ¶κ°€
>
> β‡’ μ΄μ— λ€λΉ„ν•κΈ° μ„ν•΄ μμ‹ μ§€μ SYN μμ‹  λ€κΈ° μ‹κ°„μ„ μ¤„μ΄κ±°λ‚ μΉ¨μ… μ°¨λ‹¨ μ‹μ¤ν…μ„ ν™μ©ν•¨

> **Multi Thread**
>
> μ—¬λ¬ κ°μ μ”μ²­μ΄ μ™”μ„ λ• μ΄μ „ μ”μ²­μ μ²λ¦¬λ΅ μΈν•΄ μ΄ν›„ μ”μ²­μ΄ μ“°λ λ“λ¥Ό ν• λ‹Ήλ°›κΈ° μ„ν•΄ λ€κΈ°ν•λ” μƒν™©μ΄ μƒκΈ°λ©°, μ²λ¦¬ μ§€μ—°μΌλ΅ λ‘ μ”μ²­ λ¨λ‘ μ£½μ–΄λ²„λ¦΄ μ μμ
>
> => μ—¬λ¬ κ°μ μ“°λ λ“λ¥Ό μƒμ„±ν•μ—¬ ν•΄κ²°ν•¨ (μ”μ²­λ§λ‹¤ μ“°λ λ“λ¥Ό μƒμ„±ν•λ” λ°©μ‹κ³Ό μ“°λ λ“ ν’€μ— μΌμ •λ‰μ μ“°λ λ“λ¥Ό κ΄€λ¦¬ν•λ” λ°©μ‹ λ“±μ΄ μμ)

π“•μλ£ μ¶μ²
TCP header μ‚¬μ§„[https://itwiki.kr/w/TCP_%ED%97%A4%EB%8D%94#google_vignette]
3-way handshake μ‚¬μ§„[https://ko.wikipedia.org/wiki/%EC%A0%84%EC%86%A1_%EC%A0%9C%EC%96%B4_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C]
